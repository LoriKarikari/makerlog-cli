{"version":3,"sources":["../package.json","../config/store.config.js","../config/phin.config.js","../components/loader.js","login.js"],"names":["module","exports","configStore","require","packageJson","name","p","store","options","parse","core","headers","has","Authorization","get","defaults","Login","Component","render","state","message","constructor","props","componentDidMount","setState","res","url","method","data","username","password","body","token","set","non_field_errors","join","e","console","log","propTypes","PropTypes","string","isRequired"],"mappings":"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","file":"login.js","sourceRoot":"../../commands","sourcesContent":["module.exports = {\n\t\"name\": \"makerlog-cli\",\n\t\"version\": \"0.0.0\",\n\t\"license\": \"MIT\",\n\t\"bin\": {\n\t\t\"makerlog\": \"./build/cli.js\"\n\t},\n\t\"engines\": {\n\t\t\"node\": \">=8\"\n\t},\n\t\"scripts\": {\n\t\t\"dev\": \"pastel dev\",\n\t\t\"build\": \"pastel build\",\n\t\t\"prepare\": \"pastel build\"\n\t},\n\t\"files\": [\n\t\t\"build\"\n\t],\n\t\"dependencies\": {\n\t\t\"configstore\": \"^4.0.0\",\n\t\t\"ink\": \"^2.2.0\",\n\t\t\"ink-spinner\": \"^3.0.1\",\n\t\t\"pasteljs\": \"^1.0.1\",\n\t\t\"phin\": \"^3.3.0\",\n\t\t\"prop-types\": \"^15.7.2\",\n\t\t\"react\": \"^16.8.6\"\n\t}\n}\n;","const configStore = require(\"configstore\");\nconst packageJson = require(\"../package.json\");\n\n// Create a Configstore instance\nmodule.exports = new configStore(packageJson.name);\n","const p = require(\"phin\");\nconst store = require(\"./store.config\");\n\nlet options = {\n\tparse: \"json\",\n\tcore: {\n\t\theaders: {\n\t\t\t\"Content-Type\": \"application/json\"\n\t\t}\n\t}\n};\n\nif (store.has(\"token\"))\n\toptions.core.headers.Authorization = \"Token \" + store.get(\"token\");\n\nmodule.exports = p.defaults(options);\n","import React, { Fragment } from \"react\";\nimport { Color } from \"ink\";\nimport Spinner from \"ink-spinner\";\n\nmodule.exports = () => (\n\t<Fragment>\n\t\t<Color green>\n\t\t\t<Spinner type=\"dots\" />\n\t\t</Color>\n\t\t{\" Loading\"}\n\t</Fragment>\n);\n","import React, { Component } from \"react\";\nimport { Text } from \"ink\";\nimport PropTypes from \"prop-types\";\nimport store from \"../config/store.config\";\nimport phin from \"../config/phin.config\";\nimport Loader from \"../components/loader\";\n\n/// Log into your Makerlog account\nclass Login extends Component {\n\trender() {\n\t\treturn <Text>{this.state.message || <Loader />}</Text>;\n\t}\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tmessage: \"\"\n\t\t};\n\t}\n\n\tasync componentDidMount() {\n\t\tif (store.has(\"token\"))\n\t\t\treturn this.setState({\n\t\t\t\tmessage: \"You are already logged in.\"\n\t\t\t});\n\t\ttry {\n\t\t\tconst res = await phin({\n\t\t\t\turl: \"https://api.getmakerlog.com/api-token-auth/\",\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: {\n\t\t\t\t\tusername: this.props.username,\n\t\t\t\t\tpassword: this.props.password\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst body = res.body;\n\t\t\tif (body.token) {\n\t\t\t\tstore.set(\"token\", body.token);\n\t\t\t\tthis.setState({\n\t\t\t\t\tmessage: \"Logged in succesfully.\"\n\t\t\t\t});\n\t\t\t} else if (body.non_field_errors)\n\t\t\t\tthis.setState({\n\t\t\t\t\tmessage: body.non_field_errors.join(\"\\n\")\n\t\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t}\n\t}\n}\n\nLogin.propTypes = {\n\t/// Your Makerlog username\n\tusername: PropTypes.string.isRequired,\n\t/// Your Makerlog password\n\tpassword: PropTypes.string.isRequired\n};\n\nexport default Login;\n"]}